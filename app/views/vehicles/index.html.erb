<p id="notice"><%= notice %></p>

<h1>Vehicles</h1>

<table class="table">
  <thead>
  <tr>
    <th>Placa</th>
    <th>Marca</th>
    <th>Número de SOAT</th>
    <th>Vencimiento de SOAT</th>
    <th>Número de RTM</th>
    <th>Vencimiento RTM</th>
    <th>Km de cambio de aceite</th>
    <th>Km de proximo cambio</th>
    <th colspan="3"></th>
  </tr>
  </thead>

  <tbody>
  <% @vehicles.each do |vehicle| %>
    <%
      calcular_dias_soat = ((Date.parse Time.now.to_s) - (Date.parse vehicle.vencimiento_soat.to_s) ).to_i
      calcular_dias_rtm = ( (Date.parse Time.now.to_s) - (Date.parse vehicle.vencimiento_rtm.to_s) ).to_i
    %>
    <% if calcular_dias_soat == 0 || calcular_dias_rtm == 0 %>

      <tr class='table-danger'>

    <% elsif (calcular_dias_soat >= 1 && calcular_dias_soat <= 5) || (calcular_dias_rtm >= 1 && calcular_dias_rtm <= 5) %>

      <tr class='table-warning'>

    <% else %>

      <tr>

    <% end %>
    <td><%= vehicle.placa %></td>
    <td><%= vehicle.marca %></td>
    <td><%= vehicle.n_soat %></td>
    <td <%= calcular_dias_soat >= 1 && calcular_dias_soat <= 5 ? "class=text-warning" : "" %> >
      <%= vehicle.vencimiento_soat %>
    </td>
    <td><%= vehicle.n_rtm %></td>
    <td <%= calcular_dias_rtm >= 1 && calcular_dias_rtm <= 5 ? "class=text-warning" : "" %> >
      <%= vehicle.vencimiento_rtm %>
    </td>
    <td><%= vehicle.km_cambio_aceite %></td>
    <td><%= vehicle.km_proximocambio %></td>
    <td><%= link_to 'Edit', edit_vehicle_path(vehicle), class: 'btn btn-primary' %></td>
    <td><%= link_to 'Destroy', vehicle, method: :delete, data: {confirm: 'Are you sure?'}, class: 'btn btn-danger' %></td>
    </tr>
  <% end %>
  </tbody>
</table>

<br>

<%= link_to 'Nuevo Vehiculo', new_vehicle_path, class: 'btn btn-primary' %>
